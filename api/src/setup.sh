#!/usr/bin/env bash

# Setup commands for the API
# Author: Andrew Jarombek
# Date: 6/8/2019

# Upgrade Python to 3.7 on mac
brew install python3
brew link --overwrite python

# Install flask
pip3 --version
pip3 install flask

# Run the app from a development server
export FLASK_APP=app.py
python3 -m flask run

pip3 install pymysql
pip3 install boto3

# Working with pipenv - a package manager and virtual environment for Python
brew install pipenv
pipenv --version

# See the home directory for the pipenv project.
pipenv --where

# See a graph of installed dependencies
pipenv graph

# Install dependencies into the Pipfile generated by pipenv
cd api/src
pipenv install flask
pipenv install pymysql
pipenv install boto3
pipenv install flask-sqlalchemy
pipenv install flask-bcrypt
pipenv install flask-sslify
pipenv install coverage --dev

# See all the endpoints exposed by Flask, ensure there are no syntax errors in the Python files.
pipenv run flask routes

### Local Startup Commands - MacOS
brew update python
pip3 install pipenv

pipenv --rm
pipenv install

export FLASK_APP=app.py
export ENV=local
pipenv run python3 -m flask run
pipenv run python3 -m flask test
